<!doctype html>
<html lang="en">

<head>
    <!-- Charset + Viewport -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <!-- Indexing & Privacy -->
    <meta name="robots" content="noindex, nofollow" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <!-- Theming & UX -->
    <meta name="color-scheme" content="light dark" />
    <meta name="theme-color" content="#003366" />
    <meta name="format-detection" content="telephone=no, address=no, email=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="mobile-web-app-capable" content="yes" />
    <!-- Title + Description -->
    <title>Carbamazepine Trial Tracker</title>
    <meta name="description" content="Lightweight daily tracker for Carbamazepine titration, symptoms, and side effects. Data stays in your browser. Export JSON or CSV for GitHub." />
    <!-- Open Graph -->
    <meta property="og:title" content="Carbamazepine Trial Tracker" />
    <meta property="og:description" content="Lightweight daily tracker for Carbamazepine titration, symptoms, and side effects. Data stays in your browser. Export JSON or CSV for GitHub." />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="" />
    <meta property="og:site_name" content="James Saint" />
    <meta property="og:locale" content="en_GB" />
    <meta property="og:image" content="https://jamessaint.github.io/images/seed-of-life-gold-default.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Carbamazepine Trial Tracker" />
    <meta name="twitter:description" content="Lightweight daily tracker for Carbamazepine titration, symptoms, and side effects. Data stays in your browser. Export JSON or CSV for GitHub." />
    <meta name="twitter:image" content="https://jamessaint.github.io/images/seed-of-life-gold-default.png" />
    <!-- App Icons + Manifest -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://jamessaint.github.io/images/icons/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="https://jamessaint.github.io/images/icons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="https://jamessaint.github.io/images/icons/favicon-16x16.png" />
    <link rel="manifest" href="https://jamessaint.github.io/site.webmanifest" />
    <link rel="mask-icon" href="https://jamessaint.github.io/images/icons/safari-pinned-tab.svg" color="#003366" />
    <meta name="msapplication-TileColor" content="#003366" />
    <!-- Preconnect/DNS Prefetch for performance -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <!-- CSS Framework + Fonts -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://jamessaint.github.io/medical/global_styles.css" rel="stylesheet" />
    <!-- Mild Content Security Policy -->
<meta http-equiv="Content-Security-Policy"
  content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
    style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com;
    font-src  'self' https://fonts.gstatic.com;
    img-src   'self' data: blob:;
    connect-src 'self';
    frame-ancestors 'none';
    base-uri 'self';
    form-action 'self';
  ">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Carbamazepine Trial Tracker",
        "url": "",
        "description": "Lightweight daily tracker for Carbamazepine titration, symptoms, and side effects. Data stays in your browser. Export JSON or CSV for GitHub.",
        "inLanguage": "en-GB",
        "isPartOf": { "@type": "WebSite", "name": "James Saint", "url": "https://jamessaint.github.io/" }
    }
    </script>
</head>

<body>
    <main class="content">
        <header class="mb-3">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/medical/">Medical</a></li>
                    <li class="breadcrumb-item"><a href="/medical/neurological">Neurological</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Carbamazepine Trial Tracker</li>
                </ol>
            </nav>
            <h1>Carbamazepine Trial Tracker</h1>
            <p class="meta">Data is stored locally in browser. Export regularly and commit JSON to your GitHub repo.</p>
        </header>
        <section class="section card-like">
            <h2>Quick Entry</h2>
            <form id="entryForm">
                <div class="row g-3">
                    <div class="col-12 col-md-4">
                        <label class="form-label">Date</label>
                        <input type="date" id="date" class="form-control" required>
                    </div>
                    <div class="col-12 col-md-4">
                        <label class="form-label">Time</label>
                        <input type="time" id="time" class="form-control" required>
                    </div>
                    <div class="col-12 col-md-4">
                        <label class="form-label">Dose (mg)</label>
                        <input type="range" id="dose" class="form-range" min="0" max="1200" step="100" value="0" oninput="out_dose.textContent=value">
                        <div><span class="small-label">Selected:</span> <span id="out_dose" class="range-output">0</span> mg</div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="form-label">Pain (0 to 10)</label>
                        <input type="range" id="pain" class="form-range" min="0" max="10" step="1" value="0" oninput="out_pain.textContent=value">
                        <div><span class="small-label">Selected:</span> <span id="out_pain" class="range-output">0</span></div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="form-label">Sedation / Sleepiness (0 to 10)</label>
                        <input type="range" id="sedation" class="form-range" min="0" max="10" step="1" value="0" oninput="out_sedation.textContent=value">
                        <div><span class="small-label">Selected:</span> <span id="out_sedation" class="range-output">0</span></div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="form-label">Dizziness (0 to 10)</label>
                        <input type="range" id="dizziness" class="form-range" min="0" max="10" step="1" value="0" oninput="out_dizziness.textContent=value">
                        <div><span class="small-label">Selected:</span> <span id="out_dizziness" class="range-output">0</span></div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="form-label">Nausea (0 to 10)</label>
                        <input type="range" id="nausea" class="form-range" min="0" max="10" step="1" value="0" oninput="out_nausea.textContent=value">
                        <div><span class="small-label">Selected:</span> <span id="out_nausea" class="range-output">0</span></div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="form-label">Brain Fog / Clarity (0 to 10)</label>
                        <input type="range" id="brainfog" class="form-range" min="0" max="10" step="1" value="0" oninput="out_brainfog.textContent=value">
                        <div><span class="small-label">Selected:</span> <span id="out_brainfog" class="range-output">0</span></div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="form-label">Sleep (hours)</label>
                        <input type="range" id="sleep" class="form-range" min="0" max="14" step="1" value="7" oninput="out_sleep.textContent=value">
                        <div><span class="small-label">Selected:</span> <span id="out_sleep" class="range-output">7</span> h</div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="form-label d-block">Appetite</label>
                        <div class="btn-group" role="group" aria-label="Appetite">
                            <input type="radio" class="btn-check" name="appetite" id="app_low" autocomplete="off" value="Low">
                            <label class="btn btn-outline-primary" for="app_low">Low</label>
                            <input type="radio" class="btn-check" name="appetite" id="app_norm" autocomplete="off" value="Normal" checked>
                            <label class="btn btn-outline-primary" for="app_norm">Normal</label>
                            <input type="radio" class="btn-check" name="appetite" id="app_high" autocomplete="off" value="High">
                            <label class="btn btn-outline-primary" for="app_high">High</label>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <label class="form-label d-block">Notable Effects</label>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="fx_itch" value="Itching">
                            <label class="form-check-label" for="fx_itch">Itching</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="fx_vision" value="Vision change">
                            <label class="form-check-label" for="fx_vision">Vision change</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="fx_headache" value="Headache">
                            <label class="form-check-label" for="fx_headache">Headache</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="checkbox" id="fx_gi" value="GI upset">
                            <label class="form-check-label" for="fx_gi">GI upset</label>
                        </div>
                    </div>
                    <div class="col-12">
                        <label class="form-label">Notes</label>
                        <textarea id="notes" class="form-control" rows="2" placeholder="Optional short note"></textarea>
                    </div>
                </div>
                <!-- Vitals (AM/PM) -->
                <fieldset class="mt-3">
                    <legend class="h6 mb-2 text-uppercase">Vitals</legend>
                    <div class="row g-2 align-items-end">
                        <!-- Morning -->
                        <div class="col-12 col-md-6">
                            <label class="form-label fw-semibold mb-1">Morning (AM)</label>
                            <div class="row g-2">
                                <div class="col-4">
                                    <label for="am_sys" class="form-label small mb-1">Systolic</label>
                                    <input type="number" class="form-control" id="am_sys" inputmode="numeric" min="70" max="250" step="1" placeholder="e.g. 120">
                                </div>
                                <div class="col-4">
                                    <label for="am_dia" class="form-label small mb-1">Diastolic</label>
                                    <input type="number" class="form-control" id="am_dia" inputmode="numeric" min="40" max="150" step="1" placeholder="e.g. 80">
                                </div>
                                <div class="col-4">
                                    <label for="am_hr" class="form-label small mb-1">Pulse</label>
                                    <input type="number" class="form-control" id="am_hr" inputmode="numeric" min="30" max="220" step="1" placeholder="e.g. 70">
                                </div>
                            </div>
                        </div>
                        <!-- Evening -->
                        <div class="col-12 col-md-6">
                            <label class="form-label fw-semibold mb-1">Evening (PM)</label>
                            <div class="row g-2">
                                <div class="col-4">
                                    <label for="pm_sys" class="form-label small mb-1">Systolic</label>
                                    <input type="number" class="form-control" id="pm_sys" inputmode="numeric" min="70" max="250" step="1" placeholder="e.g. 118">
                                </div>
                                <div class="col-4">
                                    <label for="pm_dia" class="form-label small mb-1">Diastolic</label>
                                    <input type="number" class="form-control" id="pm_dia" inputmode="numeric" min="40" max="150" step="1" placeholder="e.g. 78">
                                </div>
                                <div class="col-4">
                                    <label for="pm_hr" class="form-label small mb-1">Pulse</label>
                                    <input type="number" class="form-control" id="pm_hr" inputmode="numeric" min="30" max="220" step="1" placeholder="e.g. 66">
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <div class="btn-wrap mt-3">
                    <button type="submit" class="btn btn-primary">Save Entry</button>
                    <button type="button" id="btn-clear-today" class="btn btn-outline-secondary">Clear Today</button>
                </div>
            </form>
        </section>
        <section id="entries" class="section card-like">
            <h2>Entries</h2>
            <div class="btn-wrap mb-2 d-flex flex-wrap align-items-center gap-2">
                <button type="button" id="btn-export-json" class="btn btn-success">Export JSON</button>
                <button type="button" id="btn-export-csv" class="btn btn-success">Export CSV</button>
                <button type="button" id="btn-import-json" class="btn btn-outline-primary">Import JSON</button>
                <input type="file" id="import-file" class="import-input" accept=".json,application/json">
                <button type="button" id="btn-clear-all" class="btn btn-outline-danger">Clear All</button>
                <!-- Safe merge & archive -->
                <button type="button" id="btn-safe-export" class="btn btn-primary">Safe Export (Merge First)</button>
                <button type="button" id="btn-archive-snapshot" class="btn btn-outline-secondary">Archive Snapshot</button>
                <!-- Data Source -->
                <div class="d-inline-flex align-items-center gap-2 ms-auto">
                    <label for="data-source" class="small mb-0 text-uppercase fw-semibold">Data source:</label>
                    <select id="data-source" class="form-select form-select-sm" style="width:auto;">
                        <option value="local" selected>Local</option>
                        <option value="repo">Repo</option>
                        <option value="merged">Merged</option>
                    </select>
                </div>
            </div>
            <div class="table-responsive entries-wrap">
                <table id="entriesTable" class="entries-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Time</th>
                            <th class="num">Dose</th>
                            <th class="num">Pain</th>
                            <th class="num">Sedation</th>
                            <th class="num">Dizziness</th>
                            <th class="num">Nausea</th>
                            <th class="num">Brain Fog</th>
                            <th class="num">Sleep</th>
                            <th>Appetite</th>
                            <th>Effects</th>
                            <!-- NEW -->
                            <th>AM BP / Pulse</th>
                            <th>PM BP / Pulse</th>
                            <!-- /NEW -->
                            <th>Notes</th>
                            <th class="actions-col">Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>
        <!-- Footer -->
        <footer class="site-footer mt-4" role="contentinfo" aria-label="Site footer">
            <div class="footer-container text-center">
                <hr class="footer-rule" />
                <div class="footer-note mb-1">
                    Private & Confidential · Intended for the named clinical team and the patient only.
                </div>
                <div class="footer-copy">
                    © <span id="copy-year"></span> James Saint. All rights reserved.
                </div>
            </div>
        </footer>
        <!-- Year Autoupdate -->
        <script>
        (function() {
            var y = new Date().getFullYear();
            var el = document.getElementById('copy-year');
            if (el) el.textContent = y;
        })();
        </script>
    </main>
<script defer src="/medical/neurological/js/carbamazepine-tracker.js"></script>

</body>

</html>